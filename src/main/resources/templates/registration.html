<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html  lang="en">
<head>
    <link rel="stylesheet" media="screen" href="../css/index_style.css">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Реєстрація</title>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="..//css/photographProfile.css">


    <!-- Latest compiled and minified JavaScript -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <!-- Подлючаем библиотеку jQuery -->
    <script src="/assets/demo/jquery/jquery-1.11.2.min.js"></script>
    <!-- Подлючаем js файл Bootstrap -->
    <script src="/assets/demo/bootstrap-3/js/bootstrap.min.js"></script>


    <style>
        .suces-ok::after{
            border-color: green;
            color: green;
        }
        .suces-remove::after {
            content: "Данi_не_коректнi";
            border-color: red;
            color: red;
        }
        .form-control-feedbacks{
            padding: 0;
            margin: 0;
            width: 150px;
            height: 12px;

        }


    </style>

</head>
<body>
<div class="modal fade bs-example-modal-sm-photograph" id="myModal" tabindex="-1" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <!-- Заголовок модального окна -->
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">×</button>
                <h4 class="modal-title" id="myModalLabel">Реєстрація</h4>
            </div>
            <!-- Основная часть модального окна, содержащая форму для регистрации -->
            <div class="modal-body">
                <!-- Форма для регистрации -->
                <form role="form" class="form-horizontal"  th:action="@{/}" method="post">
                    <!-- Блок для ввода логина -->
                    <div class="form-group has-feedback">
                        <label class="control-label col-xs-3">Логін:</label>
                        <div class="col-xs-6">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-user"></i></span>
                                <input type="text" class="form-control" required="required" name="username" pattern="[A-Za-z]{3,}" placeholder="не менше 3-x символів">
                            </div>
                            <span class="suuccess, form-control-feedbacks"></span>

                        </div>
                    </div>
                    <!-- Блок для введення паролю -->
                    <div class="form-group has-feedback">
                        <label class="control-label col-xs-3">Пароль:</label>
                        <div class="col-xs-6">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-pencil"></i></span>
                                <input type="password" class="form-control" required="required" name="password" pattern="[0-9]{5,10}" placeholder="від 5 до 10 символів">
                            </div>
                            <span class="suuccess form-control-feedbacks"></span>
                        </div>
                    </div>
                    <!-- Блок для ввода email -->
                    <div class="form-group has-feedback">
                        <label class="control-label col-xs-3">Email:</label>
                        <div class="col-xs-6">
                            <div class="input-group">
                                <span class="input-group-addon"><i class="glyphicon glyphicon-envelope"></i></span>
                                <input type="email" class="form-control" required="required" name="email" placeholder="чинний email">
                            </div>
                            <span class="suuccess form-control-feedbacks"></span>
                        </div>
                    </div>
                    <!-- Конец блока для ввода email-->
                </form>
            </div>
            <!-- Нижняя часть модального окна -->
            <div class="modal-footer">
                <button type="button"nclass="btn btn-default" data-dismiss="modal">Відміна</button>
                <button id="save" type="submit" class="btn btn-primary">Реєстрація</button>
            </div>
        </div>
    </div>
</div>
<script>
    $(function() {
        //при нажатии на кнопку с id="save"h
        $('#save').click(function() {
            //переменная formValid
            var formValid = true;
            //перебрать все элементы управления input
            $('input').each(function() {
                //найти предков, которые имеют класс .form-group, для установления success/error
                var formGroup = $(this).parents('.form-group');
                //найти glyphicon, который предназначен для показа иконки успеха или ошибки
                var suuccess = formGroup.find('.form-control-feedbacks');

                //для валидации данных используем HTML5 функцию checkValidity
                if (this.checkValidity()) {
                    //добавить к formGroup класс .has-success, удалить has-error
                    formGroup.addClass('has-success').removeClass('has-error');
                    //добавить к glyphicon класс glyphicon-ok, удалить glyphicon-remove
                    suuccess.addClass('suces-ok').removeClass('suces-remove');
                } else {
                    //добавить к formGroup класс .has-error, удалить .has-success
                    formGroup.addClass('has-error').removeClass('has-success');
                    //добавить к glyphicon класс glyphicon-remove, удалить glyphicon-ok
                    suuccess.addClass('suces-remove').removeClass('suces-ok');
                    //отметить форму как невалидную
                    formValid = false;
                }
            });
            //если форма валидна, то
            if (formValid) {
                //сркыть модальное окно
                // $('#myModal').modal('hide');
                //отобразить сообщение об успехе
                // $('#success-alert').removeClass('hidden');


                let username = $("#username").val();
                let password = $("#password").val();
                let email = $("#email").val();
                $.ajax({
                    url: '/newPhotograph',
                    type: 'POST',
                    contentType: 'application/json',
                    data: JSON.stringify({username, password}, {email}),
                    dataType: 'json',
                    success: function (response) {
                        console.log(response);
                    },
                    error: function (err) {
                        console.log(err);
                    }
                })
            }
        });
    });
</script>

<div class="modal fade bs-example-modal-sm-user" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Внесіть свої дані</h4>
            </div>
            <form th:action="@{/newUser}" method="post">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Логін</label>
                        <input type="text" class="form-control" name="username" placeholder="enter your login">
                        <span></span>
                    </div>
                    <div class="form-group">
                        <label>Пароль</label>
                        <input type="password" class="form-control" name="password" placeholder="enter your password">
                        <span></span>
                    </div>
                    <div class="form-group">
                        <label>Електронна пошта</label>
                        <input type="email" class="form-control" name="email" placeholder="enter your email">
                        <span></span>
                    </div>
                </div>
                <div class="modal-footer">
                    <input type = "submit" class="btn btn-primary" value="Зареєструватися">
                </div>
            </form>
        </div>
    </div>
</div>
<script>

</script>

<div id="left">
    <div >
        <button id="savePhotograph" data-toggle="modal" data-target=".bs-example-modal-sm-photograph" > <span>PHOTOGRAPHER</span></button>
    </div>
</div>


<div id="right">
        <div>
            <button id="saveUser" data-toggle="modal" data-target=".bs-example-modal-sm-user" ><span>USER</span></button>
        </div>
</div>


</body>

</html>
</html>